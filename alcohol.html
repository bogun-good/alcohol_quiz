<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ìŒì£¼ ì˜í–¥ í€´ì¦ˆ ê²Œì„</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif; /* Inter í°íŠ¸ ì‚¬ìš© */
            background: #eef; /* ë°°ê²½ìƒ‰ */
            overflow: hidden; /* ìŠ¤í¬ë¡¤ë°” ë°©ì§€ */
            height: 100%;
        }

        /* ê²Œì„ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        #gameArea {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom, #cceeff, #99ccff); /* ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* ìƒë‹¨ ì •ë ¬ */
            padding-top: 5vh; /* ìƒë‹¨ ì—¬ë°± ì¶”ê°€ */
            box-sizing: border-box;
        }

        /* ë¬¸ì œ ìƒì ìŠ¤íƒ€ì¼ */
        #questionBox {
            background: white;
            padding: 3vh 4vw; /* ë‚´ë¶€ ì—¬ë°± */
            border: 2px solid #555;
            border-radius: 10px;
            max-width: 90vw;
            width: auto; /* ë‚´ìš©ì— ë”°ë¼ ë„ˆë¹„ ì¡°ì • */
            font-size: 2.8vw; /* ë·°í¬íŠ¸ ë„ˆë¹„ì— ë¹„ë¡€í•˜ëŠ” ê¸€ì í¬ê¸° */
            text-align: center;
            white-space: pre-wrap; /* ì¤„ë°”ê¿ˆ ìœ ì§€ */
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
            line-height: 1.4; /* ì¤„ ê°„ê²© */
            margin-bottom: 3vh; /* ë³´ê¸°ê°€ ë‚˜íƒ€ë‚  ê³µê°„ í™•ë³´ */
            box-sizing: border-box;
        }

        /* ë³´ê¸° ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        #optionsContainer {
            display: flex; /* Flexbox í™œì„±í™” */
            flex-direction: column; /* ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ì•„ì´í…œ ì •ë ¬ */
            align-items: center; /* ê°€ë¡œì¶• ê°€ìš´ë° ì •ë ¬ */
            gap: 2vh; /* ë³´ê¸° ìƒìë“¤ ì‚¬ì´ì˜ ì„¸ë¡œ ê°„ê²© */
            margin-bottom: 5vh; /* ìë™ì°¨ì™€ ë‹¤ìŒ ë²„íŠ¼ ê³µê°„ í™•ë³´ */
            max-width: 90vw; /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
            box-sizing: border-box;
        }

        /* ë³´ê¸° ìƒì ìŠ¤íƒ€ì¼ */
        .optionBox {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 8px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            padding: 4vh 3vw; /* ë†’ì´ë¥¼ 2ë°°ë¡œ ì¦ê°€ (ê¸°ì¡´ 2vhì—ì„œ 4vhë¡œ) */
            font-size: 2.2vw; /* ì‘ì€ ê¸€ì”¨ */
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.1);
            transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease; /* í˜¸ë²„ ë° ìƒíƒœ ë³€ê²½ íš¨ê³¼ */
            min-width: 50vw; /* ìµœì†Œ ë„ˆë¹„ (ê°€ìš´ë° ì •ë ¬ ì‹œ ì¢€ ë” ë„“ê²Œ) */
            max-width: 70vw; /* ìµœëŒ€ ë„ˆë¹„ */
            box-sizing: border-box;
            white-space: normal; /* í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ í—ˆìš© */
        }

        .optionBox:hover {
            background: #e0e0e0;
            border-color: #999;
        }

        .optionBox.correct {
            background-color: #d4edda; /* ì •ë‹µ ë°°ê²½ìƒ‰ */
            border-color: #28a745; /* ì •ë‹µ í…Œë‘ë¦¬ìƒ‰ */
            color: #155724; /* ì •ë‹µ ê¸€ììƒ‰ */
        }

        .optionBox.incorrect {
            background-color: #f8d7da; /* ì˜¤ë‹µ ë°°ê²½ìƒ‰ */
            border-color: #dc3545; /* ì˜¤ë‹µ í…Œë‘ë¦¬ìƒ‰ */
            color: #721c24; /* ì˜¤ë‹µ ê¸€ììƒ‰ */
        }

        /* ì£¼ê´€ì‹ ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        #answerInput {
            width: 70vw; /* ë„ˆë¹„ ì¡°ì ˆ */
            max-width: 500px;
            height: 15vh; /* ë†’ì´ ì¡°ì ˆ */
            padding: 2vw;
            font-size: 2vw;
            border: 2px solid #ccc;
            border-radius: 8px;
            box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.1);
            resize: vertical; /* ìˆ˜ì§ìœ¼ë¡œë§Œ í¬ê¸° ì¡°ì ˆ ê°€ëŠ¥ */
            box-sizing: border-box;
            margin-top: 2vh; /* ë¬¸ì œì™€ì˜ ê°„ê²© */
        }

        /* ìë™ì°¨ ìŠ¤íƒ€ì¼ */
        #car {
            position: absolute;
            width: 18vw; /* ë·°í¬íŠ¸ ë„ˆë¹„ì— ë¹„ë¡€ */
            max-width: 150px; /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
            height: 10vh; /* ë·°í¬íŠ¸ ë†’ì´ì— ë¹„ë¡€ */
            max-height: 80px; /* ìµœëŒ€ ë†’ì´ ì œí•œ */
            background: linear-gradient(to right, #3498db, #2980b9); /* íŒŒë€ìƒ‰ ê·¸ë¼ë°ì´ì…˜ */
            border-radius: 10px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            bottom: 8vh; /* í•˜ë‹¨ì—ì„œ 8% ë–¨ì–´ì§„ ìœ„ì¹˜ */
            left: 5vw; /* ì™¼ìª½ì—ì„œ 5% ë–¨ì–´ì§„ ì‹œì‘ ìœ„ì¹˜ */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.3); /* ê·¸ë¦¼ì */
            transition: left 0.03s linear; /* ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„ */
            white-space: nowrap; /* í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ ë°©ì§€ */
            padding: 0 1vw; /* ë‚´ë¶€ ì—¬ë°± */
            box-sizing: border-box; /* íŒ¨ë”©ì´ ë„ˆë¹„ì— í¬í•¨ë˜ë„ë¡ */
        }

        /* ìë™ì°¨ ì•ˆì˜ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ (ë„¤ëª¨ ì•ˆì— ì‘ì€ ê¸€ì”¨) */
        #car span {
            font-size: 2.2vw; /* ìë™ì°¨ ê¸€ì í¬ê¸°ë³´ë‹¤ ì‘ê²Œ */
            padding: 0.5vh 1vw; /* ë„¤ëª¨ ì•ˆì˜ íŒ¨ë”© */
            border: 1px solid rgba(255, 255, 255, 0.7); /* í°ìƒ‰ í…Œë‘ë¦¬ */
            border-radius: 5px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            background-color: rgba(0, 0, 0, 0.2); /* ë°˜íˆ¬ëª… ë°°ê²½ */
        }

        /* ì ìˆ˜ í‘œì‹œ ìŠ¤íƒ€ì¼ */
        #score {
            position: absolute;
            top: 2vh;
            left: 3vw;
            font-size: 2.8vw;
            font-weight: bold;
            color: #333;
        }

        /* ë‹¤ìŒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #nextBtn {
            position: absolute;
            bottom: 3vh; /* í•˜ë‹¨ì—ì„œ 3% ë–¨ì–´ì§„ ìœ„ì¹˜ */
            right: 3vw; /* ì˜¤ë¥¸ìª½ì—ì„œ 3% ë–¨ì–´ì§„ ìœ„ì¹˜ */
            padding: 1.5vh 3vw; /* ë‚´ë¶€ ì—¬ë°± */
            font-size: 2.8vw;
            background: #27ae60; /* ë…¹ìƒ‰ ë²„íŠ¼ */
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s ease; /* í˜¸ë²„ íš¨ê³¼ */
        }

        #nextBtn:hover {
            background: #2ecc71;
        }

        /* ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #restartBtn {
            margin-top: 3vh;
            padding: 1.5vh 3vw;
            font-size: 2.8vw;
            background: #007bff; /* íŒŒë€ìƒ‰ ë²„íŠ¼ */
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s ease;
        }

        #restartBtn:hover {
            background: #0056b3;
        }

        /* í”¼ë“œë°± ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
        #feedback {
            position: absolute;
            bottom: 20vh; /* ìë™ì°¨ ìœ„ì— ìœ„ì¹˜ */
            left: 50%;
            transform: translateX(-50%);
            font-size: 3vw;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            min-width: 200px; /* ë©”ì‹œì§€ ê³µê°„ í™•ë³´ */
            text-align: center;
            z-index: 10; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— í‘œì‹œ */
        }

        /* ìµœì¢… ê²°ê³¼ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #finalResult {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* í™”ë©´ ì¤‘ì•™ ì •ë ¬ */
            background: white;
            padding: 5vh 6vw;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            text-align: center;
            font-size: 3vw;
            font-weight: bold;
            line-height: 1.6;
            display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
            z-index: 20; /* ê°€ì¥ ìœ„ì— í‘œì‹œ */
            overflow-y: auto; /* ë‚´ìš©ì´ ë„˜ì¹  ê²½ìš° ìŠ¤í¬ë¡¤ */
            max-height: 90vh; /* ìµœëŒ€ ë†’ì´ */
        }

        #finalResult p {
            margin: 1vh 0;
        }

        #descriptiveAnswers p {
            text-align: left; /* ì£¼ê´€ì‹ ë¬¸ì œ/ë‹µë³€ì€ ì™¼ìª½ ì •ë ¬ */
            margin-top: 2vh;
            border-top: 1px dashed #ccc;
            padding-top: 1vh;
            font-size: 2.5vw; /* ì£¼ê´€ì‹ ë‹µ í˜ì´ì§€ ê¸€ì í¬ê¸° */
            font-weight: normal;
        }

        #descriptiveAnswers strong {
            color: #0056b3; /* ë¬¸ì œ ìƒ‰ìƒ */
        }
        #descriptiveAnswers span {
            color: #28a745; /* ì •ë‹µ ìƒ‰ìƒ */
        }
        #descriptiveAnswers .user-answer {
            color: #6a0dad; /* ì‚¬ìš©ì ë‹µë³€ ìƒ‰ìƒ (ë³´ë¼ìƒ‰) */
        }
        #descriptiveAnswers .result-feedback {
            font-weight: bold; /* ìµœì¢… ê²°ê³¼ í˜ì´ì§€ì˜ í”¼ë“œë°± êµµê²Œ */
        }

        /* ë¯¸ë””ì–´ ì¿¼ë¦¬ - íƒœë¸”ë¦¿ (768px ì´ìƒ) */
        @media (min-width: 768px) {
            #questionBox {
                font-size: 2vw;
                max-width: 70vw;
            }
            .optionBox {
                font-size: 1.6vw;
                padding: 3vh 2.5vw; /* ë†’ì´ë¥¼ 2ë°°ë¡œ ì¦ê°€ (ê¸°ì¡´ 1.5vhì—ì„œ 3vhë¡œ) */
                min-width: 40vw; /* íƒœë¸”ë¦¿ì—ì„œ ë„ˆë¹„ ì¡°ì • */
                max-width: 60vw;
            }
            #answerInput {
                width: 60vw;
                font-size: 1.8vw;
            }
            #score, #nextBtn, #restartBtn {
                font-size: 2vw;
            }
            #feedback {
                font-size: 2.5vw;
            }
            #car {
                font-size: 2.5vw;
            }
            #car span {
                font-size: 1.8vw; /* íƒœë¸”ë¦¿ì—ì„œ ì‘ì€ ê¸€ì”¨ í¬ê¸° ì¡°ì • */
            }
            #finalResult {
                font-size: 2.5vw;
                padding: 4vh 5vw;
            }
            #descriptiveAnswers p {
                font-size: 2vw;
            }
        }

        /* ë¯¸ë””ì–´ ì¿¼ë¦¬ - ë°ìŠ¤í¬í†± (1024px ì´ìƒ) */
        @media (min-width: 1024px) {
            #questionBox {
                font-size: 1.5vw;
                max-width: 60vw;
            }
            .optionBox {
                font-size: 1.2vw;
                padding: 2vh 2vw; /* ë†’ì´ë¥¼ 2ë°°ë¡œ ì¦ê°€ (ê¸°ì¡´ 1vhì—ì„œ 2vhë¡œ) */
                min-width: 30vw; /* ë°ìŠ¤í¬í†±ì—ì„œ ë„ˆë¹„ ì¡°ì • */
                max-width: 50vw;
            }
            #answerInput {
                width: 50vw;
                font-size: 1.5vw;
            }
            #score, #nextBtn, #restartBtn {
                font-size: 1.5vw;
            }
            #feedback {
                font-size: 2vw;
            }
            #car {
                width: 12vw;
                max-width: 100px;
                font-size: 1.8vw;
            }
            #car span {
                font-size: 1.2vw; /* ë°ìŠ¤í¬í†±ì—ì„œ ì‘ì€ ê¸€ì”¨ í¬ê¸° ì¡°ì • */
            }
            #finalResult {
                font-size: 2vw;
                max-width: 50vw;
            }
            #descriptiveAnswers p {
                font-size: 1.5vw;
            }
        }
    </style>
</head>
<body>

<div id="gameArea">
    <div id="score">ì ìˆ˜: 0</div>
    <div id="questionBox">ë¬¸ì œ ë¡œë”© ì¤‘...</div>
    <div id="optionsContainer">
        <!-- ë³´ê¸° ì˜µì…˜ ë˜ëŠ” ì£¼ê´€ì‹ ì…ë ¥ì°½ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
    </div>
    <div id="car"></div>
    <div id="feedback"></div>
    <button id="nextBtn">ë‹¤ìŒ</button>
    <div id="finalResult">
        <p>ğŸ‰ í€´ì¦ˆ ì™„ë£Œ!</p>
        <p>ì´ ê°ê´€ì‹ ë¬¸ì œ: <span id="totalQuestions"></span>ê°œ</p>
        <p style="color: green;">âœ… ì •ë‹µ: <span id="correctAnswers"></span>ê°œ</p>
        <p style="color: red;">âŒ ì˜¤ë‹µ: <span id="incorrectAnswers"></span>ê°œ</p>
        <p>ìµœì¢… ì ìˆ˜: <span id="finalScore"></span>ì </p>
        <div id="descriptiveAnswers">
            <!-- ì£¼ê´€ì‹ ë¬¸ì œì™€ ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            <h3>ì£¼ê´€ì‹ ë¬¸ì œ & ì •ë‹µ ì˜ˆì‹œ</h3>
        </div>
        <button id="restartBtn" onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
    </div>
</div>

<script>
    // í€´ì¦ˆ ë¬¸ì œ ë°ì´í„°
    const questions = [
        {
            type: "multiple-choice", // ë¬¸ì œ ìœ í˜•: ê°ê´€ì‹
            q: "ê³¼ë„í•œ ìŒì£¼ê°€ ì¸ì²´ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ìœ¼ë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€?",
            choices: [ // ë³´ê¸° ëª©ë¡ (í…ìŠ¤íŠ¸ì™€ ì‹¤ì œ ê°’)
                { letter: "A", text: "ê°„ ê¸°ëŠ¥ ì €í•˜" },
                { letter: "B", text: "ì‹¬í˜ˆê´€ ì§ˆí™˜ ë°œìƒ ìœ„í—˜ ì¦ê°€" },
                { letter: "C", text: "ë©´ì—­ë ¥ í–¥ìƒ" },
                { letter: "D", text: "ë‡Œ ê¸°ëŠ¥ ì €í•˜" }
            ],
            a: "C" // ì •ë‹µì˜ ì‹¤ì œ ê°’
        },
        {
            type: "multiple-choice",
            q: "ë‹¤ìŒ ì¤‘ ì•Œì½”ì˜¬ ì¤‘ë…ì˜ ê°€ì • ë‚´ ë¶€ì‘ìš©ìœ¼ë¡œ ê°€ì¥ ì¼ë°˜ì ì¸ ê²ƒì€?",
            choices: [
                { letter: "A", text: "ê°€ì • ê²½ì œì˜ í–¥ìƒ" },
                { letter: "B", text: "ê°€ì¡± ê°„ ì†Œí†µ ì¦ê°€" },
                { letter: "C", text: "ê°€ì • í­ë ¥ ì¦ê°€" },
                { letter: "D", text: "ê°€ì¡± êµ¬ì„±ì› ê±´ê°• ê°œì„ " }
            ],
            a: "C"
        },
        {
            type: "multiple-choice",
            q: "ìˆ ì´ ì‚¬íšŒì— ë¯¸ì¹˜ëŠ” ë¶€ì •ì ì¸ ì˜í–¥ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?",
            choices: [
                { letter: "A", text: "ë²”ì£„ ë°œìƒë¥  ê°ì†Œ" },
                { letter: "B", text: "ìƒì‚°ì„± ì¦ê°€" },
                { letter: "C", text: "ìŒì£¼ìš´ì „ ì‚¬ê³  ì¦ê°€" },
                { letter: "D", text: "ì‚¬íšŒì  ì‹ ë¢°ë„ í–¥ìƒ" }
            ],
            a: "C"
        },
        {
            type: "multiple-choice",
            q: "ë‹¤ìŒ ì¤‘ ì•Œì½”ì˜¬ ì˜ì¡´ì¦ì˜ ì¦ìƒìœ¼ë¡œ ë³´ê¸° ì–´ë ¤ìš´ ê²ƒì€?",
            choices: [
                { letter: "A", text: "ê¸ˆë‹¨ ì¦ìƒ" },
                { letter: "B", text: "ì¡°ì ˆ ëŠ¥ë ¥ ìƒì‹¤" },
                { letter: "C", text: "ë°˜ë³µì ì¸ ìŒì£¼ë¡œ ì¸í•œ ë¬¸ì œ ë°œìƒ" },
                { letter: "D", text: "ìŒì£¼ í›„ ì‹ ì²´ ê±´ê°• íšŒë³µ" }
            ],
            a: "D"
        },
        {
            type: "multiple-choice",
            q: "ìŒì£¼ìš´ì „ìœ¼ë¡œ ì¸í•œ ì‚¬íšŒì  í”¼í•´ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²ƒì€?",
            choices: [
                { letter: "A", text: "íƒ€ì¸ì˜ ìƒëª… ìœ„í˜‘" },
                { letter: "B", text: "ìš´ì „ ëŠ¥ë ¥ í–¥ìƒ" },
                { letter: "C", text: "ë²Œê¸ˆì´ë‚˜ ì²˜ë²Œ" },
                { letter: "D", text: "êµí†µì‚¬ê³ ë¡œ ì¸í•œ ì‚¬ë§"}
            ],
            a: "B"
        },
        {
            type: "multiple-choice",
            q: "ì²­ì†Œë…„ì˜ ìŒì£¼ê°€ ì‚¬íšŒì— ë¯¸ì¹˜ëŠ” ì˜í–¥ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?",
            choices: [
                { letter: "A", text: "í•™ì—… ëŠ¥ë ¥ í–¥ìƒ" },
                { letter: "B", text: "ë˜ë˜ ê´€ê³„ì˜ ê¸ì •ì  ê°•í™”" },
                { letter: "C", text: "ë²”ì£„ ì—°ë£¨ ê°€ëŠ¥ì„± ì¦ê°€" },
                { letter: "D", text: "ê±´ê°•í•œ ì„±ì¥ ì´‰ì§„" }
            ],
            a: "C"
        },
        {
            type: "descriptive-scored", // 7ë²ˆ ë¬¸ì œ: ì ìˆ˜ ë°˜ì˜ ë° í”¼ë“œë°± ì œê³µ
            q: "ìˆ ì´ ê°„ì— ë¯¸ì¹˜ëŠ” ëŒ€í‘œì ì¸ ì§ˆë³‘ ë‘ ê°€ì§€ë¥¼ ì„œìˆ í•˜ì„¸ìš”.",
            a: "ê°„ê²½ë³€, ì§€ë°©ê°„" // ì£¼ê´€ì‹ ì •ë‹µ ì˜ˆì‹œ (ë³µìˆ˜ í—ˆìš©)
        },
        {
            type: "descriptive-unscored", // 8ë²ˆ ë¬¸ì œ: ì ìˆ˜ ë¯¸ë°˜ì˜, í”¼ë“œë°± ì—†ìŒ
            q: "ê°€ì •ì—ì„œ ê³¼ë„í•œ ìŒì£¼ê°€ ê°€ì •ì— ë¯¸ì¹  ìˆ˜ ìˆëŠ” ì˜í–¥ 1ê°€ì§€ ì´ìƒ ì„œìˆ í•˜ì„¸ìš”.",
            a: "ê°€ì • í­ë ¥, ë¶ˆí™”, ê²½ì œì  ì–´ë ¤ì›€, ì•„ë™ ë°©ì¹˜"
        },
        {
            type: "descriptive-unscored", // 9ë²ˆ ë¬¸ì œ: ì ìˆ˜ ë¯¸ë°˜ì˜, í”¼ë“œë°± ì—†ìŒ
            q: "ìŒì£¼ìš´ì „ì´ ì‚¬íšŒì ìœ¼ë¡œ ì™œ í° ë¬¸ì œê°€ ë˜ëŠ”ì§€ ì´ìœ ë¥¼ 2ê°€ì§€ ì´ìƒ ì„œìˆ í•˜ì„¸ìš”.",
            a: "êµí†µì‚¬ê³  ë° ì‚¬ë§ì ì¦ê°€, ì‚¬íšŒì  ë¹„ìš© ë°œìƒ, íƒ€ì¸ì˜ ìƒëª… ìœ„í˜‘, ë²•ì  ì²˜ë²Œ"
        },
        {
            type: "descriptive-unscored", // 10ë²ˆ ë¬¸ì œ: ì ìˆ˜ ë¯¸ë°˜ì˜, í”¼ë“œë°± ì—†ìŒ
            q: "ê±´ê°•í•˜ê³  ì±…ì„ ìˆëŠ” ìŒì£¼ ë¬¸í™”ë¥¼ í˜•ì„±í•˜ê¸° ìœ„í•´ ê°œì¸ì´ë‚˜ ì‚¬íšŒê°€ í•  ìˆ˜ ìˆëŠ” ë…¸ë ¥ì„ ì„œìˆ í•˜ì„¸ìš”.",
            a: "ì ˆì£¼ êµìœ¡, ìº í˜ì¸, ëŒ€ì¤‘êµí†µ ì´ìš© ê¶Œì¥, ìŒì£¼ ìì œ ë¶„ìœ„ê¸° ì¡°ì„±"
        }
    ];

    let currentQuestionIndex = 0; // í˜„ì¬ ë¬¸ì œ ì¸ë±ìŠ¤
    let score = 0; // ì´ ì ìˆ˜
    let mcCorrectCount = 0; // ê°ê´€ì‹ ì •ë‹µ ê°œìˆ˜
    let mcIncorrectCount = 0; // ê°ê´€ì‹ ì˜¤ë‹µ ê°œìˆ˜
    let carMoveInterval; // ìë™ì°¨ ì›€ì§ì„ ì¸í„°ë²Œ ID
    let isCarMovingRight = true; // ìë™ì°¨ ì´ë™ ë°©í–¥ (ì˜¤ë¥¸ìª½: true, ì™¼ìª½: false)
    let optionsDisabled = false; // ë³´ê¸° í´ë¦­ ë¹„í™œì„±í™” ì—¬ë¶€
    let userDescriptiveAnswers = []; // ì‚¬ìš©ìì˜ ì£¼ê´€ì‹ ë‹µë³€ì„ ì €ì¥í•  ë°°ì—´

    // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const car = document.getElementById("car");
    const questionBox = document.getElementById("questionBox");
    const optionsContainer = document.getElementById("optionsContainer"); // ë³´ê¸° ì»¨í…Œì´ë„ˆ
    const scoreDisplay = document.getElementById("score");
    const feedback = document.getElementById("feedback");
    const nextBtn = document.getElementById("nextBtn");
    const finalResultDiv = document.getElementById("finalResult");
    const descriptiveAnswersDiv = document.getElementById("descriptiveAnswers"); // ì£¼ê´€ì‹ ë‹µì„ í‘œì‹œí•  div
    const totalQuestionsSpan = document.getElementById("totalQuestions");
    const correctAnswersSpan = document.getElementById("correctAnswers");
    const incorrectAnswersSpan = document.getElementById("incorrectAnswers");
    const finalScoreSpan = document.getElementById("finalScore");

    // "ë‹¤ìŒ" ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    nextBtn.addEventListener("click", () => {
        const currentQType = questions[currentQuestionIndex].type;
        if (currentQType.startsWith("descriptive")) { // ëª¨ë“  ì£¼ê´€ì‹ ë¬¸ì œ íƒ€ì…
            const answerInput = document.getElementById('answerInput');
            if (answerInput) { // ì…ë ¥ì°½ì´ ìˆì„ ë•Œë§Œ
                checkDescriptiveAnswer(answerInput.value, currentQType);
            }
        } else {
            // ê°ê´€ì‹ ë¬¸ì œì˜ ê²½ìš°, checkAnswerì—ì„œ ì´ë¯¸ ì²˜ë¦¬ë¨
            nextQuestion(); // ì§ì ‘ í˜¸ì¶œí•˜ì—¬ ë‹¤ìŒ ë¬¸ì œë¡œ ì§„í–‰
        }
    });

    // ë¬¸ì œ ë¡œë“œ í•¨ìˆ˜
    function loadQuestion() {
        if (currentQuestionIndex >= questions.length) {
            showResult(); // ëª¨ë“  ë¬¸ì œ í’€ì´ ì™„ë£Œ ì‹œ ê²°ê³¼ í‘œì‹œ
            return;
        }

        const qData = questions[currentQuestionIndex];
        questionBox.innerText = qData.q; // ë¬¸ì œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸

        // ì´ì „ ë¬¸ì œì˜ ë³´ê¸° ìš”ì†Œ ë˜ëŠ” ì…ë ¥ì°½ ì œê±°
        optionsContainer.innerHTML = "";
        
        // ìë™ì°¨ ìƒíƒœ ì´ˆê¸°í™”
        car.innerHTML = ""; // ìë™ì°¨ ë‚´ìš© ë¹„ìš°ê¸°
        car.style.backgroundColor = '#3498db'; // ìë™ì°¨ ê¸°ë³¸ìƒ‰ìœ¼ë¡œ (íŒŒë€ìƒ‰)
        feedback.innerText = ""; // í”¼ë“œë°± ë©”ì‹œì§€ ë¹„ìš°ê¸°
        feedback.style.color = "";
        nextBtn.style.display = "none"; // ë‹¤ìŒ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
        optionsDisabled = false; // ë³´ê¸° í´ë¦­ ë‹¤ì‹œ í™œì„±í™”

        // ë¬¸ì œ ìœ í˜•ì— ë”°ë¼ ì²˜ë¦¬
        if (qData.type === "multiple-choice") {
            optionsContainer.style.display = "flex"; // ê°ê´€ì‹ì€ ë³´ê¸° ì»¨í…Œì´ë„ˆ í‘œì‹œ
            qData.choices.forEach((choice) => {
                const optionBox = document.createElement("div");
                optionBox.classList.add("optionBox");
                optionBox.innerText = `${choice.letter}. ${choice.text}`; // A, B, C, Dì™€ í…ìŠ¤íŠ¸ í•¨ê»˜ í‘œì‹œ
                optionBox.dataset.letter = choice.letter; // ì •ë‹µ í™•ì¸ì„ ìœ„í•œ ë°ì´í„° ì†ì„±
                
                optionBox.addEventListener("click", () => checkAnswer(optionBox, choice.letter));
                optionsContainer.appendChild(optionBox); // optionsContainerì— ì¶”ê°€
            });
            car.innerHTML = `<span>ì •ë‹µ ëŒ€ê¸°ì¤‘...</span>`;
            car.style.backgroundColor = '#6c757d'; // ìë™ì°¨ëŠ” ì •ë‹µ ì„ íƒ ì „ê¹Œì§€ íšŒìƒ‰
        } else if (qData.type.startsWith("descriptive")) { // ëª¨ë“  ì£¼ê´€ì‹ íƒ€ì…
            optionsContainer.style.display = "flex"; // ì£¼ê´€ì‹ì€ ì…ë ¥ì°½ì„ í‘œì‹œí•˜ê¸° ìœ„í•´ flex ìœ ì§€

            const answerInput = document.createElement("textarea");
            answerInput.id = "answerInput";
            answerInput.placeholder = "ì—¬ê¸°ì— ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”.";
            optionsContainer.appendChild(answerInput); // ì…ë ¥ì°½ ì¶”ê°€

            // ìë™ì°¨ì— ì •ë‹µ í‘œì‹œí•˜ì§€ ì•ŠìŒ
            car.innerHTML = `<span>ë‹µë³€ ì…ë ¥ ëŒ€ê¸°ì¤‘...</span>`; // ìë™ì°¨ì— ì¼ë°˜ ë©”ì‹œì§€ í‘œì‹œ
            car.style.backgroundColor = '#6c757d'; // íšŒìƒ‰ ìœ ì§€
            feedback.innerText = "ë‹µë³€ì„ ì…ë ¥í•˜ê³  ë‹¤ìŒ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
            feedback.style.color = "#3498db"; // íŒŒë€ìƒ‰ í”¼ë“œë°±
            
            // ì£¼ê´€ì‹ ë¬¸ì œì˜ ë‹¤ìŒ ë²„íŠ¼ì€ ë°”ë¡œ í™œì„±í™”
            nextBtn.style.display = "block";
        }

        // ìë™ì°¨ ì›€ì§ì„ ì‹œì‘
        startCarMovement();
    }

    // ìë™ì°¨ ì›€ì§ì„ ì‹œì‘ í•¨ìˆ˜
    function startCarMovement() {
        clearInterval(carMoveInterval); // ê¸°ì¡´ ì¸í„°ë²Œ ì¤‘ì§€

        let carLeft = parseFloat(car.style.left); // í˜„ì¬ ìë™ì°¨ ì™¼ìª½ ìœ„ì¹˜
        const gameAreaWidth = window.innerWidth; // ê²Œì„ ì˜ì—­ ë„ˆë¹„
        const carWidth = car.offsetWidth; // ìë™ì°¨ ë„ˆë¹„
        const padding = 50; // í™”ë©´ ê²½ê³„ë¡œë¶€í„°ì˜ ì—¬ë°±

        carMoveInterval = setInterval(() => {
            if (isCarMovingRight) {
                carLeft += 3; // ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ ì†ë„
                if (carLeft + carWidth >= gameAreaWidth - padding) {
                    isCarMovingRight = false;
                }
            } else {
                carLeft -= 3; // ì™¼ìª½ìœ¼ë¡œ ì´ë™ ì†ë„
                if (carLeft <= padding) {
                    isCarMovingRight = true;
                }
            }
            car.style.left = carLeft + "px"; // ìë™ì°¨ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            car.dataset.isMovingRight = isCarMovingRight; // ë°©í–¥ ìƒíƒœ ì—…ë°ì´íŠ¸
        }, 30);
    }

    // ë‹µ í™•ì¸ í•¨ìˆ˜ (ê°ê´€ì‹ ë¬¸ì œìš©)
    function checkAnswer(selectedOptionBox, selectedLetter) {
        if (optionsDisabled) return; // ì´ë¯¸ ì„ íƒí–ˆìœ¼ë©´ ë¹„í™œì„±í™”
        optionsDisabled = true; // ë³´ê¸° í´ë¦­ ë¹„í™œì„±í™”
        
        clearInterval(carMoveInterval); // ìë™ì°¨ ì›€ì§ì„ ì¤‘ì§€ (ì„ íƒ ì‹œ ë©ˆì¶¤)

        const qData = questions[currentQuestionIndex];
        const correctAnswerLetter = qData.a;

        // ëª¨ë“  ë³´ê¸° í´ë¦­ ë¹„í™œì„±í™” (ì„ íƒ í›„ì—ëŠ” ë‹¤ì‹œ í´ë¦­í•  ìˆ˜ ì—†ë„ë¡)
        document.querySelectorAll('.optionBox').forEach(box => {
            box.style.pointerEvents = 'none';
        });

        let isCorrect = false; // í˜„ì¬ ë‹µë³€ì´ ì •ë‹µì¸ì§€ ì—¬ë¶€
        if (selectedLetter === correctAnswerLetter) {
            feedback.innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤!";
            feedback.style.color = "green";
            score += 10; // ê°ê´€ì‹ë§Œ ì ìˆ˜ ë°˜ì˜
            mcCorrectCount++; // ê°ê´€ì‹ ì •ë‹µë§Œ ì¹´ìš´íŠ¸
            selectedOptionBox.classList.add("correct"); // ì •ë‹µ ìŠ¤íƒ€ì¼ ì ìš©
            isCorrect = true;
        } else {
            feedback.innerText = "âŒ ì˜¤ë‹µì…ë‹ˆë‹¤!";
            feedback.style.color = "red";
            mcIncorrectCount++; // ê°ê´€ì‹ ì˜¤ë‹µë§Œ ì¹´ìš´íŠ¸
            selectedOptionBox.classList.add("incorrect"); // ì˜¤ë‹µ ìŠ¤íƒ€ì¼ ì ìš©

            // ì •ë‹µ ë³´ê¸°ë„ ì°¾ì•„ì„œ í‘œì‹œ
            const allOptions = document.querySelectorAll('.optionBox');
            allOptions.forEach(option => {
                if (option.dataset.letter === correctAnswerLetter) {
                    option.classList.add("correct");
                }
            });
        }
        scoreDisplay.innerText = "ì ìˆ˜: " + score;

        // ìë™ì°¨ì— ì •ë‹µ í‘œì‹œ ë° ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”
        car.innerHTML = `<span>ì •ë‹µ: ${correctAnswerLetter}</span>`;
        car.style.backgroundColor = '#27ae60'; // ì •ë‹µ í‘œì‹œ ì‹œ ì´ˆë¡ìƒ‰ ë°°ê²½
        
        nextBtn.style.display = "block"; // ë‹¤ìŒ ë²„íŠ¼ ë°”ë¡œ í‘œì‹œ
    }

    // ì£¼ê´€ì‹ ë‹µ í™•ì¸ í•¨ìˆ˜
    function checkDescriptiveAnswer(userAnswer, questionType) {
        if (optionsDisabled) return; // ì´ë¯¸ í™•ì¸í–ˆìœ¼ë©´ ë¹„í™œì„±í™”
        optionsDisabled = true; // ì¶”ê°€ ì…ë ¥ ë° í™•ì¸ ë°©ì§€

        clearInterval(carMoveInterval); // ìë™ì°¨ ì›€ì§ì„ ì¤‘ì§€

        const qData = questions[currentQuestionIndex];
        const trimmedUserAnswer = userAnswer.trim(); // ì‚¬ìš©ì ë‹µë³€ ê³µë°± ì œê±°

        // ì£¼ê´€ì‹ì€ ì…ë ¥ë§Œ ìˆìœ¼ë©´ ì •ë‹µìœ¼ë¡œ ì¸ì •
        const isCorrect = trimmedUserAnswer.length > 0;

        // ì‚¬ìš©ìì˜ ë‹µë³€ê³¼ ì •ë‹µì„ ì €ì¥ (ìµœì¢… ê²°ê³¼ í˜ì´ì§€ì—ì„œ ì‚¬ìš©)
        userDescriptiveAnswers[currentQuestionIndex] = {
            question: qData.q,
            userAnswer: userAnswer, // ì›ë³¸ ë‹µë³€ ì €ì¥
            correctAnswer: qData.a,
            isCorrect: isCorrect, // ì…ë ¥ ì—¬ë¶€ì— ë”°ë¼ ì •ë‹µ ì—¬ë¶€ ì €ì¥
            type: questionType // ë¬¸ì œ ìœ í˜•ë„ ì €ì¥
        };

        if (questionType === "descriptive-scored") {
            // ì ìˆ˜ ë°˜ì˜ ì£¼ê´€ì‹ ë¬¸ì œ (7ë²ˆ)ì˜ ê²½ìš°
            if (isCorrect) {
                feedback.innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤!";
                feedback.style.color = "green";
                score += 10; // ì ìˆ˜ ë°˜ì˜
            } else {
                feedback.innerText = "âŒ ì˜¤ë‹µì…ë‹ˆë‹¤!";
                feedback.style.color = "red";
            }
            scoreDisplay.innerText = "ì ìˆ˜: " + score; // ì ìˆ˜ ì—…ë°ì´íŠ¸ UI
            car.innerHTML = `<span>${isCorrect ? 'ì •ë‹µ!' : 'ì˜¤ë‹µ!'}</span>`;
            car.style.backgroundColor = isCorrect ? '#27ae60' : '#dc3545';
        } else { // descriptive-unscored (8, 9, 10ë²ˆ)
            // ì ìˆ˜ ë¯¸ë°˜ì˜ ì£¼ê´€ì‹ ë¬¸ì œì˜ ê²½ìš°
            feedback.innerText = "ë‹µë³€ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.";
            feedback.style.color = "#3498db"; // ì¤‘ë¦½ì ì¸ íŒŒë€ìƒ‰
            car.innerHTML = `<span>ë‹µë³€ ì™„ë£Œ!</span>`;
            car.style.backgroundColor = '#6c757d'; // íšŒìƒ‰
        }
        
        // í”¼ë“œë°±ì„ ë³´ì—¬ì¤€ í›„ ë‹¤ìŒ ë¬¸ì œë¡œ ìë™ ì§„í–‰
        setTimeout(() => {
            nextQuestion();
        }, 1500); // 1.5ì´ˆ í›„ ë‹¤ìŒ ë¬¸ì œë¡œ
    }

    // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™ í•¨ìˆ˜
    function nextQuestion() {
        clearInterval(carMoveInterval); // ìë™ì°¨ ì›€ì§ì„ ì¤‘ì§€
        currentQuestionIndex++;
        loadQuestion();
    }

    // ë‹¤ì‹œ ì‹œì‘ í•¨ìˆ˜
    function restartGame() {
        currentQuestionIndex = 0; // ë¬¸ì œ ì¸ë±ìŠ¤ ì´ˆê¸°í™”
        score = 0; // ì ìˆ˜ ì´ˆê¸°í™”
        mcCorrectCount = 0; // ê°ê´€ì‹ ì •ë‹µ ìˆ˜ ì´ˆê¸°í™”
        mcIncorrectCount = 0; // ê°ê´€ì‹ ì˜¤ë‹µ ìˆ˜ ì´ˆê¸°í™”
        userDescriptiveAnswers = []; // ì£¼ê´€ì‹ ë‹µë³€ ì´ˆê¸°í™”
        optionsDisabled = false; // ë³´ê¸° í´ë¦­ í™œì„±í™”
        finalResultDiv.style.display = "none"; // ê²°ê³¼ í™”ë©´ ìˆ¨ê¹€
        questionBox.style.display = "block"; // ë¬¸ì œ ìƒì í‘œì‹œ
        optionsContainer.style.display = "flex"; // ë³´ê¸° ì»¨í…Œì´ë„ˆ í‘œì‹œ
        car.style.display = "flex"; // ìë™ì°¨ í‘œì‹œ
        scoreDisplay.style.display = "block"; // ì ìˆ˜ í‘œì‹œ
        feedback.style.display = "block"; // í”¼ë“œë°± í‘œì‹œ
        scoreDisplay.innerText = "ì ìˆ˜: 0"; // ì ìˆ˜ ì´ˆê¸°í™” í‘œì‹œ
        loadQuestion(); // ì²« ë²ˆì§¸ ë¬¸ì œ ë¡œë“œ
    }

    // ìµœì¢… ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
    function showResult() {
        document.getElementById("gameArea").style.background = "#eef"; // ë°°ê²½ìƒ‰ ë³€ê²½
        questionBox.style.display = "none"; // ë¬¸ì œ ìƒì ìˆ¨ê¹€
        optionsContainer.style.display = "none"; // ë³´ê¸° ì»¨í…Œì´ë„ˆ ìˆ¨ê¹€
        car.style.display = "none"; // ìë™ì°¨ ìˆ¨ê¹€
        nextBtn.style.display = "none"; // ë‹¤ìŒ ë²„íŠ¼ ìˆ¨ê¹€
        feedback.style.display = "none"; // í”¼ë“œë°± ìˆ¨ê¹€
        scoreDisplay.style.display = "none"; // ì ìˆ˜ ìˆ¨ê¹€

        finalResultDiv.style.display = "block"; // ìµœì¢… ê²°ê³¼ í™”ë©´ í‘œì‹œ
        
        // ê°ê´€ì‹ ê²°ê³¼ë§Œ í‘œì‹œ
        totalQuestionsSpan.innerText = questions.filter(q => q.type === "multiple-choice").length;
        correctAnswersSpan.innerText = mcCorrectCount;
        incorrectAnswersSpan.innerText = mcIncorrectCount;
        finalScoreSpan.innerText = score; // ì „ì²´ ì ìˆ˜ í‘œì‹œ

        // ì£¼ê´€ì‹ ë¬¸ì œì™€ ë‹µ í‘œì‹œ
        descriptiveAnswersDiv.innerHTML = '<h3>ì£¼ê´€ì‹ ë¬¸ì œ & ì •ë‹µ ì˜ˆì‹œ</h3>'; // ì œëª© ì´ˆê¸°í™” ë° ë³€ê²½
        let hasDescriptive = false;
        questions.forEach((qData, index) => {
            if (qData.type.startsWith("descriptive")) { // ëª¨ë“  ì£¼ê´€ì‹ ë¬¸ì œ ì²˜ë¦¬
                hasDescriptive = true;
                const p = document.createElement("p");
                const storedAnswer = userDescriptiveAnswers[index];
                const userAnswerText = storedAnswer ? storedAnswer.userAnswer : "ë‹µë³€ ì—†ìŒ";
                const correctAnswerText = qData.a;
                // descriptive-unscored íƒ€ì…ì˜ ê²½ìš° isCorrectëŠ” í•­ìƒ trueë¡œ ì²˜ë¦¬ (ì…ë ¥ë§Œ í•˜ë©´ ì •ë‹µ)
                const isCorrectForDisplay = (qData.type === "descriptive-unscored") ? (userAnswerText !== "ë‹µë³€ ì—†ìŒ") : (storedAnswer ? storedAnswer.isCorrect : false);

                let feedbackHtml = '';
                if (qData.type === "descriptive-scored") {
                    // 7ë²ˆ ë¬¸ì œ (descriptive-scored)ë§Œ ì •ë‹µ/ì˜¤ë‹µ ì—¬ë¶€ í‘œì‹œ
                    feedbackHtml = `<br><span class="result-feedback" style="color: ${isCorrectForDisplay ? 'green' : 'red'};">${isCorrectForDisplay ? 'âœ… ì •ë‹µ' : 'âŒ ì˜¤ë‹µ'}</span>`;
                }
                // 8, 9, 10ë²ˆ ë¬¸ì œ (descriptive-unscored)ëŠ” í”¼ë“œë°± ì—†ìŒ

                p.innerHTML = `<strong>ë¬¸ì œ ${index + 1}:</strong> ${qData.q.split('\n')[0].trim()}<br>` +
                              `<span class="user-answer"><strong>ë‚´ ë‹µë³€:</strong> ${userAnswerText}</span><br>` +
                              `<span><strong>ì •ë‹µ ì˜ˆì‹œ:</strong> ${correctAnswerText}</span>` +
                              feedbackHtml;
                descriptiveAnswersDiv.appendChild(p);
            }
        });

        if (!hasDescriptive) {
            descriptiveAnswersDiv.innerHTML += "<p>ì£¼ê´€ì‹ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
        }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë¬¸ì œ ë¡œë“œ
    window.onload = loadQuestion;
</script>

</body>
</html>